<?xml version="1.0"?>


<system name="fuel">
    
   
    <property>/consumables/fuel/tank[0]/level-lb</property>
    <property>/consumables/fuel/tank[1]/level-lb</property>

    <channel name="fuel">
        
        <summer name="propulsion/systems/tank/level-lb">
            <input>/consumables/fuel/tank[0]/level-lb</input>
            <input>/consumables/fuel/tank[1]/level-lb</input>
            <output>/consumables/fuel/total-fuel-lbs</output>
        </summer>
       
       
       <!--Transfer=====From transfer tank to main tank==========-->
       
       <switch name="propulsion/systems/tank/fuel-pump">
           <default value="/controls/flight/fuel-pump"/>
           <test  logic="OR" value="0">
               propulsion/systems/tank/main-tank_level gt 3487.99
               propulsion/tank[1]/contents-lbs lt 1
           </test>
           <output> /controls/flight/fuel-pump</output>
       </switch>
       
       <switch name="propulsion/systems/tank/transfer-switch">
           <default value="0"/>
           <test  logic="AND" value="1">
               /controls/flight/fuel-pump == 1
           </test>
       </switch>
       
       <summer name="propulsion/systems/tank/sum-contents-lbs">
           <input>propulsion/tank[0]/contents-lbs</input>
           <input>propulsion/tank[1]/contents-lbs</input>
           <clipto>
               <min>0</min>
               <max>9165</max>
           </clipto>
        </summer>
        
       <kinematic name="propulsion/systems/tank/transfer-qty">
           <input>propulsion/systems/tank/transfer-switch</input>
           <traverse>
               <setting>
                   <position>0.0</position>
                   <time>0.0</time>
               </setting>
               <setting>
                   <position>3488</position>
                   <time>1200</time>
               </setting>
           </traverse>
        </kinematic>
        
        <switch name="propulsion/systems/tank/transfer-done-qty">
            <default value="propulsion/systems/tank/transfer-done-qty"/>
            <test  logic="AND" value="propulsion/systems/tank/transfer-qty">
                propulsion/tank[0]/contents-lbs lt 3488
                propulsion/tank[1]/contents-lbs gt 0.99
            </test>
       </switch>
        
        <summer name="propulsion/systems/tank/main-tank_level">
            <input>propulsion/systems/tank/transfer-done-qty</input>
            <input>propulsion/tank[0]/contents-lbs</input>
            <clipto>
                <min>0</min>
                <max>3488</max>
            </clipto>
        </summer>
        
        <switch name="propulsion/systems/tank/main">
            <default value="propulsion/tank[0]/contents-lbs"/>
            <test  logic="AND" value="propulsion/systems/tank/main-tank_level">
                propulsion/tank[0]/contents-lbs lt 3488
                propulsion/systems/tank/transfer-switch == 1
            </test>
            <output>propulsion/tank[0]/contents-lbs</output>
       </switch>
       
        <summer name="propulsion/systems/tank/transfert-tank_level">
            <input>-propulsion/tank[0]/contents-lbs</input>
            <input>propulsion/systems/tank/sum-contents-lbs</input>
            <clipto>
                <min>0</min>
                <max>5678</max>
            </clipto>
            <output>propulsion/tank[1]/contents-lbs</output>
        </summer>

    </channel>

</system>
