<?xml version="1.0"?>



<system name="mule">

    

  <channel name="Mule">
      
      
      <switch name="systems/mule/model-linked">
          <default value="/sim/model/mule/linked"/>
          <test  logic="AND" value="0">
              fcs/cutoff-switch == 1
          </test>
          <output>/sim/model/mule/linked</output>
       </switch>

        <switch name="systems/mule/linked">
           <default value="0"/>
           <test  logic="AND" value="1">
                /sim/model/mule/linked == 1
                fcs/cutoff-switch == 0
                /gear/gear[1]/compression-norm gt 0.15
                launchbar/launch-bar-state == 0
           </test>
       </switch>
       
       <pure_gain name="systems/mule/mule-force">
           <input>inertia/weight-lbs</input>
           <gain>0.15</gain>
       </pure_gain>
      
       <pure_gain name="systems/mule/mule-forceback">
           <input>inertia/weight-lbs</input>
           <gain>-0.12</gain>
       </pure_gain>
       
       <switch name="systems/mule/magnitude">
           <default value="/sim/model/mule/magnitude"/>
           <test  value="systems/mule/mule-force">
               /sim/model/mule/magnitude gt  systems/mule/mule-force
           </test>
           <test  value="systems/mule/mule-forceback">
               /sim/model/mule/magnitude lt  systems/mule/mule-forceback
           </test>
       </switch>

       <switch name="systems/mule/action">
           <default value="0"/>
           <test  logic="AND" value="systems/mule/magnitude">
                systems/mule/linked == 1
                gear/unit[1]/wheel-speed-fps lt 20
                gear/unit[1]/wheel-speed-fps gt -15
           </test>
           <output>external_reactions/mule/magnitude</output>
       </switch>

  </channel>

</system>
