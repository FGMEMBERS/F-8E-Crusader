<?xml version="1.0"?>


<system name="Propulsion">

     <property>fcs/cutoff-switch</property>

    <channel name="Propulsion">

        <pure_gain name="Throttle0">
            <input>fcs/throttle-cmd-norm</input>
            <gain>1.2</gain>
            <output>fcs/throttle-pos-norm</output>
        </pure_gain>

        <kinematic name="Cutoff Switch Delay">
            <input>fcs/cutoff-switch</input>
            <traverse>
                <setting>
                    <position>0.0000</position>
                    <time>0.0000</time>
                </setting>
                <setting>
                    <position>1.0000</position>
                    <time>1.0000</time>
                </setting>
            </traverse>
        </kinematic>



        <pure_gain name="Throttle0 Cmd">
            <input>fcs/throttle-cmd-norm[0]</input>
            <gain>fcs/cutoff-switch-delay</gain>
        </pure_gain>

        <switch name="Fuel Pump0 Cmd">
            <default value="0"/>
            <test  logic="AND" value="1">
                fcs/cutoff-switch == 1
            </test>
            <output>/controls/engines/engine[0]/fuel-pump</output>
        </switch>

        

        <switch name="Cutoff0 Cmd">
            <default value="1"/>
            <test  logic="AND" value="0">
                fcs/cutoff-switch-delay == 1
                fcs/fuel-pump0-cmd == 1
                /systems/electrical/outputs/fuel-pump gt 27
            </test>
            <output>/controls/engines/engine[0]/cutoff-cmd</output>
        </switch>

       <!-- Only for animation-->
        <pure_gain name="systems/animations/heatcolor">
            <input>position/h-sl-ft</input>
            <gain>1e-04</gain>
        </pure_gain>
        
        <scheduled_gain name="systems/animations/heatscale">
            <input>/engines/engine[0]/augmentation</input>
            <table>
                <independentVar>velocities/u-fps</independentVar>
                <tableData>
                    0       0.5
                    20     0.5
                    60    0.6
                    120     0.8
                    200     1
                    350     1
                </tableData>
            </table>
        </scheduled_gain>
        
        <scheduled_gain name="systems/animations/heatflux">
            <input>/engines/engine[0]/augmentation</input>
            <table>
                <independentVar>velocities/u-fps</independentVar>
                <tableData>
                    -1      15
                    1       60
                    20     3
                    60      1
                    120     0.5
                    250     0.03
                    350     0.02
                    600     0.01
                </tableData>
            </table>
        </scheduled_gain>


    </channel>

</system>
