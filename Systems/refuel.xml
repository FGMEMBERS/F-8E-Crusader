<?xml version="1.0"?>


<system name="refuel">
    
    <channel name="refuel">
    
     <!-- Ground refueling and Air refueling-->
       <switch name="propulsion/systems/tank/refuel_switch">
           <default value="0"/>
           <test  logic="AND" value="1">
               propulsion/systems/tank/refuel-on_ground  == 1
               /instrumentation/airspeed-indicator/indicated-speed-kt lt 20
               /position/altitude-agl-ft lt 7
           </test>
           <test  logic="AND" value="2">
               propulsion/systems/tank/refuel-in_air  == 1
               /instrumentation/airspeed-indicator/indicated-speed-kt gt 200
               /position/altitude-agl-ft gt 500
               /surface-positions/refueling-pos-norm == 1
               /systems/refuel/contact == 1
           </test>
       </switch>
       
       <switch name="propulsion/systems/tank/refuel_switch-air-grnd">
           <default value="0"/>
           <test  logic="OR" value="1">
               propulsion/systems/tank/refuel_switch == 1
               propulsion/systems/tank/refuel_switch == 2
           </test>
            <output>propulsion/refuel</output>
       </switch>
      
       <switch name="propulsion/systems/tank/refuel_pump-pos-norm">
           <default value="0"/>
           <test  logic="AND" value="propulsion/systems/tank/refuel-on_ground">
               propulsion/systems/tank/level-lb lt 9165
               propulsion/systems/tank/refuel_switch == 1
           </test>
           <test  logic="AND" value="propulsion/systems/tank/refuel-in_air">
               propulsion/systems/tank/level-lb lt 9165
           </test>
           <output>/instrumentation/annunciator/refuel-pump</output>
       </switch>
       
       <!--In air refueling-->
       <switch name="propulsion/systems/tank/refuel_annunciator-overload">
           <default value="0"/>
           <test  logic="AND" value="1">
               propulsion/systems/tank/refuel_switch == 2
               propulsion/systems/tank/level-lb gt 9065
               propulsion/systems/tank/level-lb lt 9165
           </test>
           <output>/instrumentation/annunciator/refuel-overload</output>
       </switch>
       
       <pure_gain name="propulsion/systems/tank/refuel-controls">
           <input>propulsion/systems/tank/refuel-in_air</input>
           <gain>1</gain>
           <output>/controls/flight/probe-refuel</output>
       </pure_gain>
       
    </channel>

</system>
